# Функционалност и случаи на употреба

## Каталог
- Разглеждане по Отдел → Категория → Продукт; детайли на продукт с опции.
- Търсене: `GET /api/products/search?query=...` (по име/кратко описание).
- Препоръки: `GET /api/products/:id/recommendations` (популярни в същата категория; броячи при преглед/поръчка).

## Количка и поръчки
- Гост: количката се пази в localStorage. При вход – сливане в сървърната количка.
- Потребител (JWT): количката се пази в БД – CRUD: `GET/PUT/DELETE /api/user/cart`, `POST/PATCH/DELETE /api/user/cart/items`.
- Поръчка: `POST /api/orders` (JWT). Пресмятане на цена/ETA от опции; списък и детайли на поръчки.

## Плащания (Stage 3)
- Симулирано картово плащане (Stripe). Уебхук актуализира `payment_status` (paid/declined/cancelled) и `status` (processing/in_production/cancelled). Плащане на съществуваща поръчка: `POST /api/user/orders/:id/pay`.

## Админ
- CRUD за Отдели, Категории, Продукти, Опции. Качване на изображения: `POST /api/admin/upload`.

## ETA и натоварване
- Артикул: `base_production_time_days` + модификатори от избрани опции.
- Поръчка: максимум от артикулите, плюс натоварване (брой „in_production“ поръчки). Ако всички артикули са налични на ниво продукт – ETA = 1 ден.

